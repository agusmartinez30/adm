<ion-header>
  <ion-toolbar class="borderToolbar">
    <ion-buttons slot="start">
      <ion-back-button color="primary" defaultHref="/projects"></ion-back-button>
    </ion-buttons>
    <ion-title>Etapa</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content scrollbar>

  <ion-grid class="ion-padding">

    <form (ngSubmit)="onSubmit()" [formGroup]="form">
      <ion-row>
        <ion-col size="12" size-md="9">
          <h4>{{ creating ? 'Agregar Actividad' : 'Detalle Actividad' }}</h4>
        </ion-col>

        <ion-col size="12" size-md="3" *ngIf="!isWatching">
          <ion-button color="secondary" expand="block" shape="round" type="submit" [disabled]="!form.valid">
            <ion-icon slot="start" name="save-outline"></ion-icon>
            Guardar
          </ion-button>
        </ion-col>

        <ion-col size="12" size-md="6">
          <div class="card ion-margin-top">
            <ion-item lines="none">
              <ion-label position="floating">Nombre</ion-label>
              <ion-input type="text" formControlName="description" [readonly]="isWatching"></ion-input>
            </ion-item>
            <div *ngIf="!isFieldValid('description')" class="invalid-input-message">
              {{getFieldError('description')}}
            </div>
          </div>

          <div class="card ion-margin-top">
            <ion-item lines="none">
              <ion-label position="floating">Seleccione Etapa:</ion-label>
              <ion-select interface="popover" formControlName="stage" [disabled]="isWatching">
                <ion-select-option disabled value="">Etapa</ion-select-option>
                <ion-select-option *ngFor="let stage of stages" [value]="stage.id">{{ stage.name }}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <div *ngIf="!isFieldValid('project')" class="invalid-input-message">
              {{getFieldError('project')}}
            </div>
          </div>


          <div class="card ion-margin-top">
            <ion-item lines="none">
              <ion-label position="floating">Fecha de inicio</ion-label>
              <ion-input type="date" formControlName="startDate" [readonly]="isWatching"></ion-input>
            </ion-item>
            <div *ngIf="!isFieldValid('startDate')" class="invalid-input-message">
              {{getFieldError('startDate')}}
            </div>
          </div>

          <div class="card ion-margin-top">
            <ion-item lines="none">
              <ion-label position="floating">Fecha de finalizacion</ion-label>
              <ion-input type="date" formControlName="endDate" [readonly]="isWatching"></ion-input>
            </ion-item>
            <div *ngIf="!isFieldValid('endDate')" class="invalid-input-message">
              {{getFieldError('endDate')}}
            </div>
          </div>

          <div class="card ion-margin-top">
            <ion-item lines="none">
              <ion-label position="floating">Seleccione Profesional:</ion-label>
              <ion-select interface="popover" formControlName="employee" [disabled]="isWatching">
                <ion-select-option disabled value="">Profesional</ion-select-option>
                <ion-select-option *ngFor="let employee of employees" [value]="employee.id">{{ employee.name }}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <div *ngIf="!isFieldValid('project')" class="invalid-input-message">
              {{getFieldError('project')}}
            </div>
          </div>

          <div class="card ion-margin-top">
            <ion-item lines="none">
              <ion-label position="floating">Entregable</ion-label>
              <ion-input type="text" formControlName="deliverable" [readonly]="isWatching"></ion-input>
            </ion-item>
            <div *ngIf="!isFieldValid('deliverable')" class="invalid-input-message">
              {{getFieldError('deliverable')}}
            </div>
          </div>

          

        </ion-col>
      </ion-row>
    </form>
  </ion-grid>

</ion-content>